<!doctype html>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-154695841-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-154695841-1');
    </script>
	<script>function displayabs(y) {
		var x = document.getElementById(y);
		if (x.style.display == 'block') {
			x.style.display = 'none';
		} else {
			x.style.display = 'block';
		}
	}
	</script>

    <meta charset="utf-8">
    <title>The Farey Graph</title>
    <link rel="stylesheet" href="/assets/css/styles.css">
    
      <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async>
</script>

    
  </head>

  <body>
    <div class="navdiv">
  <div class="sidebar-l">
    <div>
      <div class="headline">
	
	<a href="/blog.html">Alanza</a>
	
      </div>
      <div>
	<nav>
	  
	    <div class="navbutton">
	      <a  href="/">
		Home
	      </a>
	    </div>
	  
	    <div class="navbutton">
	      <a  href="/research.html">
		Research
	      </a>
	    </div>
	  
	    <div class="navbutton">
	      <a  href="/teaching.html">
		Teaching
	      </a>
	    </div>
	  
	    <div class="navbutton">
	      <a  href="/outreach.html">
		Outreach
	      </a>
	    </div>
	  
	    <div class="navbutton">
	      <a  href="/blog.html">
		Blog
	      </a>
	    </div>
	  
	</nav>
      </div>
    </div>
  </div>
</div>

    <div class="maindiv">
      <h1>The Farey Graph</h1>
<p>27 Jun 2021</p>

<p>The Farey graph, or Farey diagram,
is an object that appears in many guises throughout math.
For me, it appears several times as a complex related to
the outer automorphism group of a free group of rank two,
but it has connections to things like continued fractions as well.
The purpose of this post is introduce the Farey graph
and prove a couple of basic properties of it.</p>

<p><img src="/assets/img/FareyGraph.png" alt="The first four layers of the Farey graph" /></p>

<p>The Farey graph has as vertices all rational numbers
expressed as fractions \(\frac{p}{q}\) in lowest terms with \(q \ge 0\),
together with a vertex for \(\frac{1}{0}\).
Two vertices \(\frac{a}{b}\) and \(\frac{c}{d}\) span an edge
when the matrix \(\begin{pmatrix} a &amp; c \\ b &amp; d \end{pmatrix}\) has determinant \(\pm 1\).
Above is a picture; thanks to StackExchange user <a href="https://tex.stackexchange.com/a/165845/212812">marchetto</a>
for the TikZ code for producing the Farey diagram, to which I mainly added numbers.
I’d like to demonstrate that the visual properties of the Farey graph hold:
namely, that every edge belongs to exactly two triangles,
and that edges do not cross.</p>

<h2 id="edges-belong-to-two-triangles">Edges belong to two triangles</h2>

<p>In this section we will show that every edge of the Farey graph belongs to two triangles.
The key tool will be a lemma I learned from
<a href="http://pi.math.cornell.edu/~hatcher/TN/TNch1.pdf">Allen Hatcher’s <em>Topology of Numbers</em></a>.</p>

<blockquote>
  <p><strong>Lemma.</strong> Suppose \(a\) and \(b\) are integers with no common divisor.
If one integral solution of \(ay - bx = n\) is \((x,y) = (c,d)\),
then the general integral solution is \((x,y) = (c + ka, d + kb)\) for integer \(k\).</p>
</blockquote>

<p><em>Proof.</em> Consider a general solution \((x,y)\).
Given our known solution \((c,d)\), we see that \(a(y-d) - b(x -c) = n - n = 0\).
Since \(a\) and \(b\) have no common factors, it follows that \(a\) divides \(x-c\) and \(b\) divides \(y-d\).
In fact, we have \(a(y-d) = abk = b(x-c)\), from which the result follows. \(\blacksquare\)</p>

<p>A variant on the proof shows that if \(ac - bd = -n\), then the general integral solution for
\(ax - by = n\) is \((ka - c,kb - d)\).</p>

<blockquote>
  <p><strong>Proposition.</strong> Suppose that \(\frac ab\) and \(\frac cd\) are in the Farey graph,
and that \(ad &gt; bc\). If \(\frac xy\) is adjacent to both \(\frac ab\) and \(\frac bc\),
then \(\frac xy = \frac{a\pm c}{b\pm d}\).</p>
</blockquote>

<p><em>Proof.</em>
Suppose \(\frac ab\) and \(\frac cd\) are as in the statement.
Now suppose \(\frac xy\) is adjacent to both \(\frac ab\) and \(\frac cd\).
Suppose first for definiteness that \(ay - bx = 1\).
By the lemma, we have that \((x,y) = (ka + c, kb + d)\) for some integer \(k\).
By assumption, we have \(cy - dx = \pm 1\), so the lemma shows that \((x,y) = (\ell c \mp a,\ell d \mp b)\)
for some integer \(\ell.\)
Therefore we have \(a(k \pm 1) = (\ell - 1)c\) and \(b(k \pm 1) = (\ell-1)d\),
from which it follows that \((k \pm 1)(\ell - 1)(ad - bc) = 0\).
Therefore either \(k = \mp 1\) or \(\ell = 1\),
both of which imply \((x,y) = (c \mp a,d \mp b)\).
If instead we have \(ay-bx = -1\), then the conclusion is the same.
We of course have \(\frac{c \mp a}{d \mp b} = \frac{a \pm c}{b \pm d}\). \(\blacksquare\)</p>

<h2 id="the-action-of-operatornamesl_2mathbbz">The action of \(\operatorname{SL}_2(\mathbb{Z})\)</h2>

<p>In this section we analyze the action of \(\operatorname{SL}_2(\mathbb{Z})\) on the Farey diagram,
proving that it is transitive on edges and triangles.</p>

<p>First let us define the action of \(\operatorname{SL}_2(\mathbb{Z})\) on the Farey diagram.
The action of \(\operatorname{SL}_2(\mathbb{Z})\) on \(\mathbb{Z}^2\)
restricts to an action on the vertex set of the Farey diagram.
Indeed, \(a\) and \(b\) are relatively prime if and only if there exists integers \(x\) and \(y\)
such that \(ax + by = 1\)
if and only if \((a,b)\) is the first column of a matrix in \(\operatorname{SL}_2(\mathbb{Z})\)
if and only if there is an element of \(\operatorname{SL}_2(\mathbb{Z})\) taking \((1,0)\) to \((a,b)\).
In terms of fractions, if \(z = \frac{p}{q}\) is a vertex of the Farey diagram,
then the action of \(\begin{pmatrix} a &amp; b \\ c &amp; d \end{pmatrix}\) sends \(z\) to</p>

\[\frac{az + b}{cz + d} = \frac{ap + bq}{cp + dq}.\]

<p>This action preserves adjacency: the reader is encouraged to figure out why.
Indeed, the action is transitive on edges:
can you show that if \(\frac ab\) and \(\frac cd\) are adjacent in the diagram,
there is an element of \(\operatorname{SL}_2(\mathbb{Z})\) sending the edge between \(\frac 01\) and \(\frac 10\)
to the edge between \(\frac ab\) and \(\frac cd\)?</p>

<p>Finally, put a <a href="https://en.wikipedia.org/wiki/Cyclic_order">cyclic order</a> on the vertex set of the Farey diagram
by taking the cyclic order induced by the linear order on \(\mathbb{Q} \cup \{\infty\}\).
That is, given three distinct elements \(p\), \(q\) and \(r\) in \(\mathbb{Q}\cup\infty\),
say \((p,q,r)\) is <em>cyclically ordered</em> if
\(a &lt; b &lt; c\) or \(b &lt; c &lt; a\) or \(c &lt; a &lt; b\) holds.
For example \((\infty,-2,0)\) is cyclically ordered.</p>

<blockquote>
  <p><strong>Proposition.</strong> Suppose \(p\), \(q\) and \(r\) are the vertices of a triangle in the Farey diagram and that
\((p,q,r)\) is cyclically ordered.
Then there is an element of \(\operatorname{SL}_2(\mathbb{Z})\) sending \((0,1,\infty)\) to \((p,q,r)\).</p>
</blockquote>

<p><em>Proof.</em>
Suppose \(p = \frac cd\) and \(r = \frac ab\).
Because \(p\) and \(r\) are adjacent in the Farey diagram,
the matrix \(\begin{pmatrix} a &amp; c \\ b &amp; d \end{pmatrix}\) has determinant \(\pm 1\).</p>

<p>Assume first that \(ad-bc = 1\), i.e. that \(p &lt; r\).
Then the claim is that \(q = \frac{a+c}{b+d}\),
which is the image of \(\frac 11\) under the matrix \(\begin{pmatrix} a &amp; c \\ b &amp; d\end{pmatrix}\).
In other words, the claim is that \((p,\frac{a-c}{b-d},r)\) is not circularly ordered,
for which we need to show that \(p&lt;\frac{a-c}{b-d}&lt;r\) is false.
Assume first that \(b-d\) is nonnegative.
Then \(ad &gt; bc\) implies \(ab - ad &lt; ab - bc\), which implies \(\frac ab &lt; \frac{a-c}{b-d}\), and the claim follows.
Next assume that \(b-d\) is negative.
Then \(ad &gt; bc\) implies that \(ad - dc &gt; bc - dc\), which implies \(\frac{a-c}{b-d} &lt; \frac cd\),
and the claim follows (Note that we assume that \(d\) is nonnegative.)</p>

<p>Next assume that \(ad - bc = -1\), i.e. that \(r &lt; p\).
Then the claim is that \(q = \frac{a-c}{b-d}\),
which is the image of \(\frac 11\) under the matrix \(\begin{pmatrix} a &amp; - c \\ b &amp; -d\end{pmatrix}\)
in \(\operatorname{SL}_2(\mathbb{Z})\).
In other words, the claim is that \((p,\frac{a+c}{b+d},r)\) is not circularly ordered,
for which we need to show that it neither \(\frac{a+c}{b+d} &lt; r &lt; p\) nor \(r &lt; p &lt; \frac{a+c}{b+d}\) holds.
In fact, \(ad &lt; bc\) implies \(ab + bc &gt; ab + ad\) holds, which implies \(\frac{a+c}{b+d} &gt; \frac ab\).
But, \(ad &lt; bc\) implies that \(ad + dc &lt; bc + dc\), which implies that \(\frac{a+c}{b+d} &lt; \frac cd\),
and the claim follows. \(\blacksquare\)</p>

<p>In fact, the proof above shows that the matrix in \(\operatorname{SL}_2(\mathbb{Z})\)
is unique up to multiplication of all the entries by \(-1\).
This corresponds to the matrix \(\begin{pmatrix} -1 &amp; 0 \\ 0 &amp; -1 \end{pmatrix}\),
which generates the <em>center</em> of \(\operatorname{SL}_2(\mathbb{Z})\).</p>

<blockquote>
  <p><strong>Corollary.</strong> The stabilizer of a triangle is isomorphic to \(C_3 \times C_2 \cong C_6\).</p>
</blockquote>

<p>An explicit generator for the cyclic group of order \(6\) stabilizing the triangle spanned by \((0,1,\infty)\)
is \(\begin{pmatrix} 1 &amp; -1 \\ 1 &amp; 0 \end{pmatrix}\).</p>

<p>The proposition also yields an element of \(\operatorname{SL}_2(\mathbb{Z})\) interchanging \(0\) and \(\infty\):
this element is \(\begin{pmatrix} 0 &amp; -1 \\ 1 &amp; 0 \end{pmatrix}\).
This element is unique up to multiplication by \(-1\) and has order \(4\), so we have proven the following.</p>

<blockquote>
  <p><strong>Corollary.</strong> The stabilizer of an edge is isomorphic to \(C_4\).</p>
</blockquote>

<h2 id="edges-do-not-cross">Edges do not cross</h2>

<p>We finish this post by proving that edges of the Farey diagram do not cross,
in the sense that if \(p\) and \(q\) are adjacent and \(r\) and \(s\) are adjacent
and \(p\), \(q\), \(r\) and \(s\) are all distinct,
then if \((p,r,q)\) is cyclically ordered, then \((p,s,q)\) is also cyclically ordered.
By results in the previous section, we may assume \(p = 0\) and \(q = \infty\).
That is, if \(r = \frac ab\) is positive and \(\frac cd\) is adjacent to \(\frac ab\),
then \(\frac cd\) is also positive.
By swapping the roles of \(r\) and \(s\) if necessary, we may assume that \(ad - bc = 1\).
Since we assume that \(a\), \(b\), and \(d\) are positive integers, then we must have \(c \ge 0\)
in order to satisfy \(ad -bc = 1\).</p>


    </div>
  </body>
</html>
